<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/docs/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/docs/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(4)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(4) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(3) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(4) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(4) > ul.nav-list { display: block; } </style> <script src="/docs/assets/js/vendor/lunr.min.js"></script> <script src="/docs/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/docs/assets/images/noir.png" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Testing | Noir</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="Testing" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Noir is an attack surface detector form source code." /> <meta property="og:description" content="Noir is an attack surface detector form source code." /> <link rel="canonical" href="/docs/contribute/testing" /> <meta property="og:url" content="/docs/contribute/testing" /> <meta property="og:site_name" content="Noir" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Testing" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Noir is an attack surface detector form source code.","headline":"Testing","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/docs/assets/images/noir.png"}},"url":"/docs/contribute/testing"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/docs/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="Noir"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Getting Started category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/getting-started/" class="nav-list-link">Getting Started</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/getting-started/about/" class="nav-list-link">What is Noir?</a></li><li class="nav-list-item"><a href="/docs/getting-started/installation/" class="nav-list-link">Installation</a></li><li class="nav-list-item"><a href="/docs/getting-started/usage/" class="nav-list-link">Usage</a></li><li class="nav-list-item"><a href="/docs/getting-started/supports/" class="nav-list-link">Supports</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Getting Further category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/getting-further/" class="nav-list-link">Getting Further</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/getting-further/endpoints/" class="nav-list-link">Endpoints Structure</a></li><li class="nav-list-item"><a href="/docs/getting-further/output/" class="nav-list-link">Output Formats</a></li><li class="nav-list-item"><a href="/docs/getting-further/deliver/" class="nav-list-link">Deliver</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Contribute category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/contribute/" class="nav-list-link">Contribute</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/contribute/how-to-contribute" class="nav-list-link">How to Contribute</a></li><li class="nav-list-item"><a href="/docs/contribute/build" class="nav-list-link">Set up Build Environment</a></li><li class="nav-list-item"><a href="/docs/contribute/structure" class="nav-list-link">Struct of Project</a></li><li class="nav-list-item"><a href="/docs/contribute/testing" class="nav-list-link">Testing</a></li><li class="nav-list-item"><a href="/docs/contribute/formatting_linting" class="nav-list-link">Formatting and Linting</a></li><li class="nav-list-item"><a href="/docs/contribute/debugging" class="nav-list-link">Debugging</a></li></ul></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://github.com/noir-cr/noir" class="nav-list-link external" > Noir on GitHub <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <footer class="site-footer"> Noir is open-source project and made it with ❤️ </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Noir" aria-label="Search Noir" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/noir-cr/noir" class="site-button" > GitHub </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/docs/contribute/">Contribute</a></li> <li class="breadcrumb-nav-list-item"><span>Testing</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h2 id="testing"> <a href="#testing" class="anchor-heading" aria-labelledby="testing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Testing </h2> <p>Noir manages code quality through both Unit and Functional testing. You can execute test code using Crystal’s spec feature.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Basic testing</span>
crystal spec

<span class="c"># If you want more detail?</span>
crystal spec <span class="nt">-v</span>
</code></pre></div></div> <h2 id="unit-test"> <a href="#unit-test" class="anchor-heading" aria-labelledby="unit-test"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Unit Test </h2> <p>Unit tests are defined under <code class="language-plaintext highlighter-rouge">spec/unit_test/</code> in Noir.</p> <div class="language-crystal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Example</span>

<span class="n">describe</span> <span class="s2">"Detect Java Armeria"</span> <span class="k">do</span>
  <span class="n">options</span> <span class="o">=</span> <span class="k">def</span><span class="nf">ault_options</span><span class="p">()</span>
  <span class="n">instance</span> <span class="o">=</span> <span class="no">DetectorJavaArmeria</span><span class="p">.</span><span class="nf">new</span> <span class="n">options</span>

  <span class="n">it</span> <span class="s2">"pom.xml"</span> <span class="k">do</span>
    <span class="n">instance</span><span class="p">.</span><span class="nf">detect</span><span class="p">(</span><span class="s2">"pom.xml"</span><span class="p">,</span> <span class="s2">"com.linecorp.armeria"</span><span class="p">).</span><span class="nf">should</span> <span class="n">eq</span><span class="p">(</span><span class="kp">true</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="n">it</span> <span class="s2">"build.gradle"</span> <span class="k">do</span>
    <span class="n">instance</span><span class="p">.</span><span class="nf">detect</span><span class="p">(</span><span class="s2">"build.gradle"</span><span class="p">,</span> <span class="s2">"com.linecorp.armeria"</span><span class="p">).</span><span class="nf">should</span> <span class="n">eq</span><span class="p">(</span><span class="kp">true</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <h2 id="functional-test"> <a href="#functional-test" class="anchor-heading" aria-labelledby="functional-test"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Functional Test </h2> <p>Functional tests are defined under <code class="language-plaintext highlighter-rouge">spec/functional_test/</code> in Noir. Functional tests consist of Fixtures and Testers.</p> <ul> <li><code class="language-plaintext highlighter-rouge">spec/functional_test/fixtures/*</code></li> <li><code class="language-plaintext highlighter-rouge">spec/functional_test/testers/*</code></li> </ul> <p>Fixtures involve creating sample code that resembles the actual code under analysis. Testers, on the other hand, use Fixture paths to verify if detection is accurate, the number of discovered endpoints, and whether the expected information matches the detailed information of detected endpoints (such as paths, methods, parameters, etc.).</p> <div class="language-crystal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Example of Rails Analyzer</span>

<span class="n">extected_endpoints</span> <span class="o">=</span> <span class="p">[</span>
  <span class="no">Endpoint</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"/secret.html"</span><span class="p">,</span> <span class="s2">"GET"</span><span class="p">),</span>
  <span class="no">Endpoint</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"/posts"</span><span class="p">,</span> <span class="s2">"GET"</span><span class="p">),</span>
  <span class="no">Endpoint</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"/posts/1"</span><span class="p">,</span> <span class="s2">"GET"</span><span class="p">),</span>
  <span class="no">Endpoint</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"/posts"</span><span class="p">,</span> <span class="s2">"POST"</span><span class="p">,</span> <span class="p">[</span>
    <span class="no">Param</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"json"</span><span class="p">),</span>
    <span class="no">Param</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"title"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"json"</span><span class="p">),</span>
    <span class="no">Param</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"json"</span><span class="p">),</span>
    <span class="no">Param</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"X-API-KEY"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"header"</span><span class="p">),</span>
  <span class="p">]),</span>
  <span class="no">Endpoint</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"/posts/1"</span><span class="p">,</span> <span class="s2">"PUT"</span><span class="p">,</span> <span class="p">[</span>
    <span class="no">Param</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"json"</span><span class="p">),</span>
    <span class="no">Param</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"title"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"json"</span><span class="p">),</span>
    <span class="no">Param</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"json"</span><span class="p">),</span>
    <span class="no">Param</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"X-API-KEY"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"header"</span><span class="p">),</span>
  <span class="p">]),</span>
  <span class="no">Endpoint</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"/posts/1"</span><span class="p">,</span> <span class="s2">"DELETE"</span><span class="p">),</span>
<span class="p">]</span>

<span class="no">FunctionalTester</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"fixtures/rails/"</span><span class="p">,</span> <span class="p">{</span>
  <span class="ss">:techs</span>     <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
  <span class="ss">:endpoints</span> <span class="o">=&gt;</span> <span class="mi">6</span><span class="p">,</span>
<span class="p">},</span> <span class="n">extected_endpoints</span><span class="p">).</span><span class="nf">test_all</span>
</code></pre></div></div> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
